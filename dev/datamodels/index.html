<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Providing Data and Models · InformationGeometry</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.044/juliamono.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="InformationGeometry logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">InformationGeometry</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Getting Started</a></li><li><a class="tocitem" href="../basics/">Basics of Information Geometry</a></li><li><span class="tocitem">Tutorial</span><ul><li class="is-active"><a class="tocitem" href>Providing Data and Models</a></li><li><a class="tocitem" href="../confidence-regions/">Confidence Regions</a></li><li><a class="tocitem" href="../transformations/">Model Transformations</a></li><li><a class="tocitem" href="../parallelization/">Parallelization</a></li><li><a class="tocitem" href="../exporting/">Exporting</a></li><li><a class="tocitem" href="../kullback-leibler/">Kullback-Leibler Divergences</a></li></ul></li><li><span class="tocitem">Advanced Examples</span><ul><li><a class="tocitem" href="../ODEmodels/">ODE-based models</a></li><li><a class="tocitem" href="../AdvancedData/">Advanced Datasets</a></li></ul></li><li><a class="tocitem" href="../methodlist/">List of useful methods</a></li><li><a class="tocitem" href="../todo/">Contributing</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorial</a></li><li class="is-active"><a href>Providing Data and Models</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Providing Data and Models</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/RafaelArutjunjan/InformationGeometry.jl/blob/master/docs/src/datamodels.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h3 id="Providing-Datasets"><a class="docs-heading-anchor" href="#Providing-Datasets">Providing Datasets</a><a id="Providing-Datasets-1"></a><a class="docs-heading-anchor-permalink" href="#Providing-Datasets" title="Permalink"></a></h3><p>Typically, one of the most difficult parts of any data science problem is to bring the data into a form which lends itself to the subsequent analysis. This section aims to describe the containers used by <a href="https://github.com/RafaelArutjunjan/InformationGeometry.jl"><strong>InformationGeometry.jl</strong></a> to store datasets and models in detail.</p><p>The data itself is stored using the <code>DataSet</code> container.</p><article class="docstring"><header><a class="docstring-binding" id="InformationGeometry.DataSet" href="#InformationGeometry.DataSet"><code>InformationGeometry.DataSet</code></a> — <span class="docstring-category">Type</span></header><section><div><p>The <code>DataSet</code> type is a versatile container for storing data. Typically, it is constructed by passing it three vectors <code>x</code>, <code>y</code>, <code>sigma</code> where the components of <code>sigma</code> quantify the standard deviation associated with each y-value. Alternatively, a full covariance matrix can be supplied for the <code>ydata</code> instead of a vector of standard deviations. The contents of a <code>DataSet</code> <code>DS</code> can later be accessed via <code>xdata(DS)</code>, <code>ydata(DS)</code>, <code>ysigma(DS)</code>.</p><p>Examples:</p><p>In the simplest case, where all data points are mutually independent and have a single <span>$x$</span>-component and a single <span>$y$</span>-component each, a <code>DataSet</code> consisting of four points can be constructed via</p><pre><code class="language-julia hljs">DataSet([1,2,3,4], [4,5,6.5,7.8], [0.5,0.45,0.6,0.8])</code></pre><p>or alternatively by</p><pre><code class="language-julia hljs">using LinearAlgebra
DataSet([1,2,3,4], [4,5,6.5,7.8], Diagonal([0.5,0.45,0.6,0.8].^2))</code></pre><p>where the diagonal covariance matrix in the second line is equivalent to the vector of standard deviations supplied in the first line.</p><p>For measurements with multiple components, it is also possible to enter them as a <code>Matrix</code> where the columns correspond to the respective components.</p><pre><code class="language-julia hljs">DataSet([0, 0.5, 1], [1 100; 2 103; 3 108], [0.5 8; 0.4 5; 0.6 10])</code></pre><p>Note that if the uncertainty matrix is square, it may be falsely interpreted as a covariance matrix instead of as the columnwise specification of standard deviations.</p><p>More generally, if a dataset consists of <span>$N$</span> points where each <span>$x$</span>-value has <span>$n$</span> many components and each <span>$y$</span>-value has <span>$m$</span> many components, this can be specified to the <code>DataSet</code> constructor via a tuple <span>$(N,n,m)$</span> in addition to the vectors <code>x</code>, <code>y</code> and the covariance matrix. For example:</p><pre><code class="language-julia hljs">X = [0.9, 1.0, 1.1, 1.9, 2.0, 2.1, 2.9, 3.0, 3.1, 3.9, 4.0, 4.1]
Y = [1.0, 5.0, 4.0, 8.0, 9.0, 13.0, 16.0, 20.0]
Cov = Diagonal([2.0, 4.0, 2.0, 4.0, 2.0, 4.0, 2.0, 4.0])
dims = (4, 3, 2)
DS = DataSet(X, Y, Cov, dims)</code></pre><p>In this case, <code>X</code> is a vector consisting of the concatenated x-values (with 3 components each) for 4 different data points. The values of <code>Y</code> are the corresponding concatenated y-values (with 2 components each) of said 4 data points. Clearly, the covariance matrix must therefore be a positive-definite <span>$(m \cdot N) \times (m \cdot N)$</span> matrix.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/RafaelArutjunjan/InformationGeometry.jl/blob/ffa9ed10efc812c5cd13aec24fc684dc537bb5e0/src/DataStructures/DataSet.jl#L3-L37">source</a></section></article><p>To complete the specification of an inference problem, a model function which is assumed to be able to capture the relationship which is inherent in the data must be added.</p><article class="docstring"><header><a class="docstring-binding" id="InformationGeometry.DataModel" href="#InformationGeometry.DataModel"><code>InformationGeometry.DataModel</code></a> — <span class="docstring-category">Type</span></header><section><div><p>In addition to storing a <code>DataSet</code>, a <code>DataModel</code> also contains a function <code>model(x,θ)</code> and its derivative <code>dmodel(x,θ)</code> where <code>x</code> denotes the x-value of the data and <code>θ</code> is a vector of parameters on which the model depends. Crucially, <code>dmodel</code> contains the derivatives of the model with respect to the parameters <code>θ</code>, not the x-values. For example</p><pre><code class="language-julia hljs">DS = DataSet([1,2,3,4], [4,5,6.5,7.8], [0.5,0.45,0.6,0.8])
model(x::Number, θ::AbstractVector{&lt;:Number}) = θ[1] * x + θ[2]
DM = DataModel(DS, model)</code></pre><p>In cases where the output of the model has more than one component (i.e. <code>ydim &gt; 1</code>), it is advisable to define the model function in such a way that it outputs static vectors using <strong>StaticArrays.jl</strong> for increased performance. For <code>ydim = 1</code>, <strong>InformationGeometry.jl</strong> expects the model to output a number instead of a vector with one component. In contrast, the parameter configuration <code>θ</code> must always be supplied as a vector (even if it only has a single component).</p><p>An initial guess for the maximum likelihood parameters can optionally be passed to the <code>DataModel</code> as a vector via</p><pre><code class="language-julia hljs">DM = DataModel(DS, model, [1.0,2.5])</code></pre><p>During the construction of a <code>DataModel</code> process which includes the search for the maximum likelihood estimate <span>$\theta_\text{MLE}$</span>, multiple tests are run. If necessary, these tests can be skipped by appending <code>true</code> as the last argument in the constructor:</p><pre><code class="language-julia hljs">DM = DataModel(DS, model, [-Inf,π,1], true)</code></pre><p>If a <code>DataModel</code> is constructed as shown in the above examples, the gradient of the model with respect to the parameters <code>θ</code> (i.e. its &quot;Jacobian&quot;) will be calculated using automatic differentiation. Alternatively, an explicit analytic expression for the Jacobian can be specified by hand:</p><pre><code class="language-julia hljs">using StaticArrays
function dmodel(x::Number, θ::AbstractVector{&lt;:Number})
   @SMatrix [x  1.]     # ∂(model)/∂θ₁ and ∂(model)/∂θ₂
end
DM = DataModel(DS, model, dmodel)</code></pre><p>The output of the Jacobian must be a matrix whose columns correspond to the partial derivatives with respect to different components of <code>θ</code> and whose rows correspond to evaluations at different components of <code>x</code>. Again, although it is not strictly required, outputting the Jacobian in form of a static matrix is typically beneficial for the overall performance.</p><p>It is also possible to specify a (logarithmized) prior distribution on the parameter space to the <code>DataModel</code> constructor after the initial guess for the MLE. For example:</p><pre><code class="language-julia hljs">using Distributions
Dist = MvNormal(ones(2), [1 0; 0 3.])
LogPriorFn(θ) = logpdf(Dist, θ)
DM = DataModel(DS, model, [1.0,2.5], LogPriorFn)</code></pre><p>The <code>DataSet</code> contained in a <code>DataModel</code> named <code>DM</code> can be accessed via <code>Data(DM)</code>, whereas the model and its Jacobian can be used via <code>Predictor(DM)</code> and <code>dPredictor(DM)</code> respectively. The MLE and the value of the log-likelihood at the MLE are accessible via <code>MLE(DM)</code> and <code>LogLikeMLE(DM)</code>. The logarithmized prior can be accessed via <code>LogPrior(DM)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/RafaelArutjunjan/InformationGeometry.jl/blob/ffa9ed10efc812c5cd13aec24fc684dc537bb5e0/src/DataStructures/DataModel.jl#L4-L45">source</a></section></article><p>&quot;Simple&quot; <code>DataSet</code>s and <code>DataModel</code>s can be visualized directly via <code>plot(DM)</code> using pre-written recipes for the <a href="https://github.com/JuliaPlots/Plots.jl"><strong>Plots.jl</strong></a> package.</p><article class="docstring"><header><a class="docstring-binding" id="InformationGeometry.ModelMap" href="#InformationGeometry.ModelMap"><code>InformationGeometry.ModelMap</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ModelMap(Map::Function, InDomain::Union{Nothing,Function}, Domain::HyperCube)
ModelMap(Map::Function, InDomain::Function, xyp::Tuple{Int,Int,Int})</code></pre><p>A container which stores additional information about a model map, in particular its domain of validity. <code>Map</code> is the actual map <code>(x,θ) -&gt; model(x,θ)</code>. <code>Domain</code> is a <code>HyperCube</code> which allows one to roughly specify the ranges of the various parameters. For more complicated boundary constraints, scalar function <code>InDomain</code> can be specified, which should be strictly positive on the valid parameter domain.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>A <code>Bool</code>-valued function which returns <code>true</code> in the valid domain also fits this description, which allows one to easily combine multiple constraints. Providing this information about the domain can be advantageous in the optimization process for complicated models.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/RafaelArutjunjan/InformationGeometry.jl/blob/ffa9ed10efc812c5cd13aec24fc684dc537bb5e0/src/ModelMaps.jl#L14-L23">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../basics/">« Basics of Information Geometry</a><a class="docs-footer-nextpage" href="../confidence-regions/">Confidence Regions »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.19 on <span class="colophon-date" title="Thursday 30 June 2022 00:39">Thursday 30 June 2022</span>. Using Julia version 1.6.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
